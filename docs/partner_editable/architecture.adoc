:xrefstyle: short

Deploying this Quick Start with default parameters builds the following {partner-product-short-name} in the AWS Control Tower environment on the AWS Cloud.

[#NewRelic-CT-arch]
.{partner-product-short-name} Quick Start Solution diagram
image::../images/newrelic-one-ct-integration-arch.png[New Relic AWS Control Tower Integration diagram, 100%]

* An administrator enrolls new or existing AWS accounts in AWS Control Tower, which generates a https://docs.aws.amazon.com/controltower/latest/userguide/lifecycle-events.html[lifecycle event].
* A lifecycle event triggers the New Relic StackSet Lambda function via an Amazon EventBridge rule.
* The New Relic StackSet Lambda function triggers the New Relic register Lambda function via Amazon Simple Notification Service (Amazon SNS).
* A dead letter queue collects messages that the New Relic register Lambda function fails to process.
* A NerdGraph API key secret is retrieved from AWS Secrets Manager (not shown). The New Relic Register Lambda function calls the New Relic NerdGraph mutation endpoint to link your AWS account with your New Relic account.
* A New Relic onboarding Lambda function creates the New Relic StackSet, which includes a cross-account IAM role. This Lambda function then triggers the New Relic StackSet Lambda function via the Amazon SNS StackSet topic. The New Relic StackSet Lambda function launches the stack set instances in all accounts that were set up by the AWS CloudFormation template.
