:xrefstyle: short

Deploying this Quick Start for a new virtual private cloud (VPC) with
default parameters builds the following {partner-product-short-name} environment in the
AWS Cloud.

// Replace this example diagram with your own. Follow our wiki guidelines: https://w.amazon.com/bin/view/AWS_Quick_Starts/Process_for_PSAs/#HPrepareyourarchitecturediagram. Upload your source PowerPoint file to the GitHub {deployment name}/docs/images/ directory in this repo. 

The solution is deployed using AWS CloudFormation templates and integrates with AWS Control Tower LifeCycle events. When a new account is created or enrolled using the AWS Control Tower account factory, the LifeCycle event triggers the Lambda function to launch CloudFormation StackSet instance. The StackSet instance creates the required IAM role in the new account. On completion of the StackSet instance, Lambda function pull New Relic NergGraph API key and secret from AWS Secret Manager and register the IAM role into New Relic.

[#NewRelic-CT-arch]
.{partner-product-short-name} Quick Start Solution diagram
image::../images/newrelic_ct_arch.png[New Relic AWS Control Tower Integration diagram, 100%]

During initial launch of {partner-product-short-name}, the solution deploys the required AWS resources, including additional Lambda function `Onboarding` that is not shown in the diagram above. If existing AWS accounts are included in deployment, `Onboarding` lambda function triggers the deployment of StackSet to existing AWS accounts and register it to New Relic One. This solution by default will enable **all** AWS integration available in New Relic One.
